====================================
Building the Cerebrum documentation
====================================

Setup
=======
Make sure that the scripts are executable::

  chmod a+x scripts/build.py scripts/rst2docbook.py \
    scripts/rst2html.py scripts/ext_doc.py scripts/ext_sqldoc.py


Running
========
To build everything, do something like::
  scripts/build.py --all

To build the html version, do something like::
  scripts/build.py --build-contents contents.rst

To build the pdf version, do something like::
  scripts/build.py --xml book.xml
  cd ,build
  export SP_ENCODING=XML
  export SP_CHARSET_FIXED=YES
  db2pdf book.xml 


Notes
========
We are using some additional directives that are not (atleast yet)
part of docutils.  This requires some modifications.

namespace
---------
Adding a line ``.. namespace:: foo`` will prefix all autogenerated ids
with ``foo``.  This is needed to avoid problems with duplicate ids
when merging the files.  Unfortunately the patch also requires
modifications to the core of docutils, see ``docutils.diff``.

Note! If you get a ``WARNING: set_namespace undefined. docutils.diff
has not been applied`` message, the directive is effectively disabled,
resulting in duplicate ids in the book.xml document, causing pdf
generation to fail.

sysinclude
-------------
This extension allows running commands, and inserting their results in
the document.  Unfortunately, docutils currently has no mechanism for
adding new directives without patching the rst2* scripts.  Therefore
the ``scripts/`` directory contains patched variants of these scripts.

